{"version":3,"sources":["yahtzee.js","index.js"],"names":["sum","a","b","Yahtzee","Ones","Twos","Threes","Fours","Fives","Sixes","Chance","roll","remainingRolls","indexes","index","dice","Math","floor","random","assign","category","assignments","Array","fill","_score","_upperBonus","_additionalYahtzees","_gameOver","gameOver","undefined","Object","values","every","upperBonus","score","additionalYahtzees","upper","lower","isAYahtzee","categoryScoring","hasYahtzee","entries","forEach","rolls","filter","reduce","slice","some","el","e","length","uniqueRolls","i","indexOf","matchedRolls","sortedRolls","sort","roleDeltas","acc","now","isArray","oneDeltaCount","delta","customElements","define","HTMLElement","connectedCallback","categories","querySelector","querySelectorAll","categoryEl","button","dataset","addEventListener","event","target","yahtzee","healdDice","render","die","tagName","parentElement","toggleAttribute","startGame","map","heald","n","window","span","disabled","textContent","dieIndex","removeAttribute","setAttribute","yahtzeeCategorySpan","observedAttributes","slowSpin","getAnimations","animation","commitStyles","cancel","rotX","rotY","rotZ","slowSpinAnimation","animate","transform","duration","iterations","Infinity","innerHTML","attributeChangedCallback","name","oldValue","newValue","face","getAttribute","hasAttribute","delay","easing"],"mappings":"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","file":"src.e31bb0bc.js","sourceRoot":"../src","sourcesContent":["const sum = (a, b) => a + b;\n\nclass Yahtzee {\n  static categoryScoring = {\n    Ones: (rolls) => rolls.filter((roll) => roll === 1).reduce(sum, 0),\n    Twos: (rolls) => rolls.filter((roll) => roll === 2).reduce(sum, 0),\n    Threes: (rolls) => rolls.filter((roll) => roll === 3).reduce(sum, 0),\n    Fours: (rolls) => rolls.filter((roll) => roll === 4).reduce(sum, 0),\n    Fives: (rolls) => rolls.filter((roll) => roll === 5).reduce(sum, 0),\n    Sixes: (rolls) => rolls.filter((roll) => roll === 6).reduce(sum, 0),\n    \"Three of a Kind\": (rolls) => {\n      return rolls\n        .slice(0, -2)\n        .some((el, index) => rolls.filter((e) => e === el).length >= 3)\n        ? rolls.reduce(sum, 0)\n        : 0;\n    },\n    \"Four of a Kind\": (rolls) => {\n      return rolls\n        .slice(0, -3)\n        .some((el, index) => rolls.filter((e) => e === el).length >= 4)\n        ? rolls.reduce(sum, 0)\n        : 0;\n    },\n    \"Full House\": (rolls) => {\n      const uniqueRolls = rolls.filter((e, i, a) => a.indexOf(e) === i).length;\n      if (uniqueRolls !== 2) return 0;\n      const matchedRolls = rolls.filter((roll) => roll === rolls[0]).length;\n      if (matchedRolls === 2 || matchedRolls === 3) return 25;\n      return 0;\n    },\n    \"Small Straight\": (rolls) => {\n      const sortedRolls = [...rolls].sort();\n      const roleDeltas = sortedRolls.reduce((acc, now, index) => [\n        ...(Array.isArray(acc) ? acc : []),\n        now - sortedRolls[index - 1],\n      ]);\n      const oneDeltaCount = roleDeltas.filter((delta) => delta === 1).length;\n      return oneDeltaCount >= 3 ? 30 : 0;\n    },\n    \"Large Straight\": (rolls) => {\n      const sortedRolls = [...rolls].sort();\n      const roleDeltas = sortedRolls.reduce((acc, now, index) => [\n        ...(Array.isArray(acc) ? acc : []),\n        now - sortedRolls[index - 1],\n      ]);\n      const oneDeltaCount = roleDeltas.filter((delta) => delta === 1).length;\n      return oneDeltaCount === 4 ? 40 : 0;\n    },\n    Chance: (rolls) => rolls.reduce(sum, 0),\n    Yahtzee: (rolls) => {\n      const uniqueRolls = rolls.filter((e, i, a) => a.indexOf(e) === i);\n      return uniqueRolls.length === 1 && uniqueRolls[0] !== null ? 50 : 0;\n    },\n  };\n\n  assignments = {\n    Ones: null,\n    Twos: null,\n    Threes: null,\n    Fours: null,\n    Fives: null,\n    Sixes: null,\n    \"Three of a Kind\": null,\n    \"Four of a Kind\": null,\n    \"Full House\": null,\n    \"Small Straight\": null,\n    \"Large Straight\": null,\n    Chance: null,\n    Yahtzee: null,\n  };\n  dice = [null, null, null, null, null];\n  remainingRolls = 3;\n\n  roll(...indexes) {\n    if (this.remainingRolls === 0) return;\n\n    for (const index of indexes) {\n      this.dice[index] = Math.floor(Math.random() * 6) + 1;\n    }\n    this.remainingRolls--;\n  }\n\n  assign(category) {\n    if (this.assignments[category] || this.dice[0] === null) return;\n\n    this.assignments[category] = this.dice;\n    this.dice = new Array(5).fill(null);\n    this.remainingRolls = 3;\n    delete this._score;\n    delete this._upperBonus;\n    delete this._additionalYahtzees;\n    delete this._gameOver;\n  }\n\n  get gameOver() {\n    if (this._gameOver !== undefined) return this._gameOver;\n    this._gameOver = Object.values(this.assignments).every(\n      (dice) => dice !== null\n    );\n    return this._gameOver;\n  }\n\n  get upperBonus() {\n    if (this._upperBonus !== undefined) return this._upperBonus;\n    this.score;\n    return this._upperBonus;\n  }\n\n  get additionalYahtzees() {\n    if (this._additionalYahtzees !== undefined) return this._additionalYahtzees;\n    this.score;\n    return this._additionalYahtzees;\n  }\n\n  get score() {\n    if (this._score !== undefined) return this._score;\n\n    let upper = 0;\n    let lower = 0;\n    this._additionalYahtzees = 0;\n    const isAYahtzee = Yahtzee.categoryScoring[\"Yahtzee\"];\n    const hasYahtzee =\n      this.assignments[\"Yahtzee\"] &&\n      isAYahtzee(this.assignments[\"Yahtzee\"]) !== 0;\n\n    Object.entries(this.assignments).forEach(([category, dice], index) => {\n      if (!dice) return;\n      if (hasYahtzee && category !== \"Yahtzee\" && isAYahtzee(dice))\n        this._additionalYahtzees++;\n      const score = Yahtzee.categoryScoring[category](dice);\n      if (index < 6) upper += score;\n      else lower += score;\n    });\n    this._upperBonus = upper >= 63 ? 35 : 0;\n\n    this._score =\n      upper + this._upperBonus + lower + this._additionalYahtzees * 100;\n    return this._score;\n  }\n}\nexport default Yahtzee;\n","import Yahtzee from \"./yahtzee\";\n\n// Icon framework\n// ==============\n\n// {\n//   const img = document.querySelector(\"img\");\n//   function drawCanvases() {\n//     for (let canvas of document.querySelectorAll(\"canvas[data-size]\")) {\n//       canvas.width = canvas.height = canvas.dataset.size;\n//       const ctx = canvas.getContext(\"2d\");\n//       ctx.drawImage(img, 0, 0, canvas.width, canvas.height);\n//     }\n//   }\n//   img.onload = drawCanvases;\n//   if (img.complete && img.naturalHeight) drawCanvases();\n// }\n\n// new Worker(new URL(\"./worker.js\", import.meta.url), { type: \"module\" });\n\n// navigator.onLine === false\n// window.addEventListener(\"offline\", (e) => {});\n// window.addEventListener(\"online\", (e) => {});\n\n// navigator.serviceWorker.register(\n//   new URL(\"service-worker.js\", import.meta.url),\n//   { type: \"module\" }\n// );\n// navigator.serviceWorker.register(\"./service-worker.js\");\n\ncustomElements.define(\n  \"yahtzee-game\",\n  class extends HTMLElement {\n    // constructor() {\n    //   super();\n    //   // const shadowRoot =\n    //   // this.attachShadow({ mode: \"open\" });\n    // }\n    connectedCallback() {\n      const categories = this.querySelector(\".Categories\");\n      [...categories.querySelectorAll(\"[data-category]\")].forEach(\n        (categoryEl) => {\n          const button = categoryEl.querySelector(\"button\");\n          button.dataset.category = categoryEl.dataset.category;\n        }\n      );\n      categories.addEventListener(\"click\", (event) => {\n        const category = event.target.dataset.category;\n        if (!category) return;\n        this.yahtzee.assign(category);\n        this.healdDice = [false, false, false, false, false];\n        this.render();\n      });\n      this.querySelector(\".Dice\").addEventListener(\"click\", (event) => {\n        let die = event.target;\n        if (die.tagName !== \"YAHTZEE-DIE\") die = die.parentElement;\n        if (die.tagName !== \"YAHTZEE-DIE\") return;\n        const index = die.dataset.index;\n        if (this.yahtzee.dice[index] === null) return;\n        this.healdDice[index] = !this.healdDice[index];\n        die.toggleAttribute(\"heald\", this.healdDice[index]);\n      });\n      this.querySelector(\".Roll\").addEventListener(\"click\", (event) => {\n        if (this.yahtzee.gameOver) {\n          this.startGame();\n          return;\n        }\n        if (!this.yahtzee.remainingRolls) return;\n        this.yahtzee.roll(\n          ...this.healdDice\n            .map((heald, index) => (heald ? false : index))\n            .filter((n) => n !== false)\n        );\n        this.render();\n      });\n      this.startGame();\n    }\n    startGame() {\n      // FIXME: recover from storage\n      window.yahtzee = this.yahtzee = new Yahtzee();\n      this.healdDice = [false, false, false, false, false];\n      this.render();\n    }\n    render() {\n      [...this.querySelectorAll(\".Categories > [data-category]\")].forEach(\n        (categoryEl) => {\n          const category = categoryEl.dataset.category;\n          const rolls = this.yahtzee.assignments[category];\n          const button = categoryEl.querySelector(\"button\");\n          const span = categoryEl.querySelector(\"span\");\n          button.disabled = true;\n          if (rolls) {\n            span.textContent = Yahtzee.categoryScoring[category](rolls);\n          } else if (this.yahtzee.dice[0] !== null) {\n            button.disabled = false;\n            span.textContent = \"-\";\n          }\n        }\n      );\n      const dice = [...this.querySelectorAll(\".Dice > yahtzee-die\")];\n      dice.forEach((die, dieIndex) => {\n        die.toggleAttribute(\"heald\", this.healdDice[dieIndex]);\n\n        if (this.yahtzee.dice[dieIndex] === null) {\n          die.removeAttribute(\"face\");\n        } else if (!this.healdDice[dieIndex]) {\n          die.setAttribute(\"face\", this.yahtzee.dice[dieIndex]);\n        }\n      });\n      const roll = this.querySelector(\".Roll\");\n      if (this.yahtzee.gameOver) {\n        roll.textContent = \"New Game\";\n        roll.disabled = false;\n      } else {\n        roll.textContent = `Roll - ${this.yahtzee.remainingRolls}`;\n        roll.disabled = this.yahtzee.remainingRolls === 0;\n      }\n      this.querySelector(\".UpperBonus > span:last-child\").textContent =\n        this.yahtzee.upperBonus || \"-\";\n      if (this.yahtzee.additionalYahtzees) {\n        const yahtzeeCategorySpan = this.querySelector(\n          '.Categories > [data-category=\"Yahtzee\"] > span'\n        );\n        yahtzeeCategorySpan.textContent += \" + 100\";\n        if (this.yahtzee.additionalYahtzees > 1) {\n          yahtzeeCategorySpan.textContent += ` x${this.yahtzee.additionalYahtzees}`;\n        }\n      }\n      this.querySelector(\n        \".Score\"\n      ).textContent = `Total - ${this.yahtzee.score}`;\n    }\n  }\n);\n\ncustomElements.define(\n  \"yahtzee-die\",\n  class extends HTMLElement {\n    static get observedAttributes() {\n      return [\"face\", \"heald\"];\n    }\n    slowSpin() {\n      // const style = window.getComputedStyle(this, null);\n      // const transformation =\n      //   style.getPropertyValue(\"-webkit-transform\") ||\n      //   style.getPropertyPriority(\"-moz-transform\") ||\n      //   style.getPropertyPriority(\"-ms-transform\") ||\n      //   style.getPropertyPriority(\"-o-transform\") ||\n      //   style.getPropertyPriority(\"transform\");\n      // let x, y, z, angle;\n      // if (!transformation || !transformation.startsWith(\"matrix3d(\")) {\n      //   x = Math.random() - 0.5;\n      //   y = Math.random() - 0.5;\n      //   z = Math.random() - 0.5;\n      //   angle = 0; // Math.floor(Math.random() * 360);\n      // } else {\n      //   const [a, b, c, _a, d, e, f, _b, g, h, i, _c, _j, _k, _l, _d] =\n      //     transformation.slice(9, -1).split(\",\").map(parseFloat);\n      //   x = h - f;\n      //   y = c - g;\n      //   z = d - b;\n      //   angle = (Math.atan((a + e + h - 1) / 2) / Math.PI) * 180;\n      // }\n\n      // this.animate(\n      //   {\n      //     transform: `rotate3d(${x}, ${y}, ${z}, ${angle + 360}deg)`,\n      //   },\n      //   {\n      //     duration: 10000 + Math.random() * 3000,\n      //     iterations: Infinity,\n      //   }\n      // );\n      this.getAnimations().forEach((animation) => {\n        animation.commitStyles();\n        animation.cancel();\n      });\n      const rotX = Math.floor(Math.random() * 360);\n      const rotY = Math.floor(Math.random() * 360);\n      const rotZ = Math.floor(Math.random() * 360);\n      // this.style.transform = `rotateX(${rotX}deg) rotateY(${rotY}deg) rotateZ(${rotZ}deg)`;\n      this.slowSpinAnimation = this.animate(\n        [\n          {\n            transform: `rotateX(${rotX}deg) rotateY(${rotY}deg) rotateZ(${rotZ}deg)`,\n          },\n          {\n            transform: `rotateX(${\n              rotX + 360 * (Math.random() > 0.5 ? 1 : -1)\n            }deg) rotateY(${\n              rotY + 360 * (Math.random() > 0.5 ? 1 : -1)\n            }deg) rotateZ(${rotZ + 360 * (Math.random() > 0.5 ? 1 : -1)}deg)`,\n          },\n        ],\n        {\n          duration: 10000 + Math.random() * 3000,\n          iterations: Infinity,\n        }\n      );\n    }\n    connectedCallback() {\n      // console.log(\"connectedCallback\", this.isConnected);\n      this.innerHTML = `<div>1</div><div>2</div><div>3</div><div>4</div><div>5</div><div>6</div>`;\n\n      if (!this.slowSpinAnimation) this.slowSpin();\n    }\n    attributeChangedCallback(name, oldValue, newValue) {\n      // console.log(\"attributeChangedCallback\", name, oldValue, newValue);\n      const face = this.getAttribute(\"face\");\n      const heald = this.hasAttribute(\"heald\");\n      // console.log({ face, heald });\n      if (face === null) return; // this.slowSpin();\n\n      let rotX = 0,\n        rotY = 0,\n        rotZ = 0;\n\n      if (face === \"1\") {\n        // noop\n      } else if (face === \"2\") {\n        rotY = 180;\n      } else if (face === \"3\") {\n        rotY = -90;\n      } else if (face === \"4\") {\n        rotY = 90;\n      } else if (face === \"5\") {\n        rotX = -90;\n      } else if (face === \"6\") {\n        rotX = 90;\n      }\n      if (!heald) {\n        rotX += (Math.random() * 6 + 5) * (Math.random() > 0.5 ? 1 : -1);\n        rotY += (Math.random() * 6 + 5) * (Math.random() > 0.5 ? 1 : -1);\n        rotZ += (Math.random() * 6 + 5) * (Math.random() > 0.5 ? 1 : -1);\n      }\n\n      // this.getAnimations().forEach((animation) => {\n      //   animation.commitStyles();\n      //   // debugger;\n      //   animation.cancel();\n      //   // debugger;\n      // });\n      this.slowSpinAnimation.cancel();\n      let delay = 0;\n      if (name !== \"heald\") {\n        delay = 300 + Math.random() * 700;\n        this.animate(\n          {\n            transform: `rotateX(${rotX - 100}deg) rotateY(${\n              rotY - 100\n            }deg) rotateZ(${rotZ - 500}deg)`,\n          },\n          {\n            duration: delay,\n            easing: \"linear\",\n            fill: \"forwards\",\n          }\n        );\n      }\n      this.animate(\n        {\n          transform: `rotateX(${rotX}deg) rotateY(${rotY}deg) rotateZ(${rotZ}deg)`,\n        },\n        {\n          delay,\n          duration: name === \"heald\" ? 300 : 1000 + Math.random() * 1000,\n          easing: \"ease-out\",\n          fill: \"forwards\",\n        }\n      );\n    }\n  }\n);\n"]}